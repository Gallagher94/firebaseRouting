(this["webpackJsonpreact-firebase-dashboard"]=this["webpackJsonpreact-firebase-dashboard"]||[]).push([[0],{31:function(e,t,a){e.exports=a(52)},36:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),i=(a(36),a(1)),s=a.n(i),u=a(3),o=a(12),m=a.n(o);a(41),a(43),a(53);m.a.initializeApp({apiKey:"AIzaSyDBEiK6batyhEC2wxr43DUG2ltUd-H_VKo",authDomain:"appId=1:631866363919:web:1210519ccfb6267899537a",projectId:"fir-linkedinrouter",storageBucket:"fir-linkedinrouter.appspot.com",messagingSenderId:"631866363919"}),console.log(m.a.app().options);var d=m.a.firestore(),p=m.a.storage(),f=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.doc("/users/".concat(t.uid)),n={uid:t.uid,email:t.email,name:t.displayName,address:"",city:"",state:"",zip:"",phone:"",specialty:"",ip:""},e.abrupt("return",a.set(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.doc("/users/".concat(t.uid)),e.abrupt("return",a.update(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e,t,a){return new Promise((function(n,r){var c="users/".concat(e,"/profile-image"),l=p.ref().child(c).put(t);l.on("state_changed",(function(e){return a(e)}),(function(e){return r(e)}),(function(){n(l.snapshot.ref)}))}))},v=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r,c,l,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.firstName,n=t.lastName,r=t.email,c=t.password,e.next=3,m.a.auth().createUserWithEmailAndPassword(r,c);case 3:return l=e.sent,i=l.user,e.next=7,i.updateProfile({displayName:"".concat(a," ").concat(n)});case 7:return e.next=9,f(i);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,m.a.auth().signInWithEmailAndPassword(a,n);case 3:return r=e.sent,e.abrupt("return",r.user);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=a(5),y=a(4),N=r.a.createContext(),w=function(e){var t=Object(n.useState)({user:null,loading:!0,isAdmin:!1}),a=Object(y.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var e=m.a.auth().onAuthStateChanged(function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,!t){e.next=6;break}return e.next=4,t.getIdTokenResult();case 4:n=e.sent,a=n.claims.admin;case 6:l({loading:!1,user:t,isAdmin:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]),r.a.createElement(N.Provider,{value:c},!c.loading&&e.children)},O=function(){return Object(n.useContext)(N)};var x=function(){var e=Object(g.g)(),t=O().user,a=function(){var t=Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.auth().signOut();case 2:e.push("/login");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("header",null,r.a.createElement("h2",null,"The Grid"),!!t&&r.a.createElement("button",{className:"ui secondary button logout",onClick:a},"LOGOUT"))},j=(a(51),a(15)),k=a(8);var S=function(e){var t=Object(j.a)(),a=t.register,c=t.handleSubmit,l=t.reset,i=Object(n.useState)(!1),o=Object(y.a)(i,2),m=o[0],d=o[1],p=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,t.next=4,v(a);case 4:n=t.sent,l(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:n?e.history.push("/profile/".concat(n.uid)):d(!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),f="ui form ".concat(m?"loading":"");return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"ui card login-card"},r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:f,onSubmit:c(p)},r.a.createElement("div",{className:"two fields"},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"First Name",r.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",ref:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Last Name",r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",ref:a})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Email",r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",ref:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Password",r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",ref:a}))),r.a.createElement("div",{className:"field actions"},r.a.createElement("button",{className:"ui primary button login",type:"submit"},"Signup"),"or",r.a.createElement(k.b,{to:"/login"},"Log In"))))))};var A=function(e){var t=Object(j.a)(),a=t.register,c=t.handleSubmit,l=t.reset,i=Object(n.useState)(!1),o=Object(y.a)(i,2),m=o[0],d=o[1],p=function(){var t=Object(u.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getIdTokenResult();case 2:t.sent.claims.admin?e.history.push("/users"):e.history.push("/profile/".concat(a.uid));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,h(t);case 4:a=e.sent,l(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:a?p(a):d(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),E="ui form ".concat(m?"loading":"");return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"ui card login-card"},r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:E,onSubmit:c(f)},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Email",r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",ref:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Password",r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",ref:a}))),r.a.createElement("div",{className:"field actions"},r.a.createElement("button",{className:"ui primary button login",type:"submit"},"Login"),"or",r.a.createElement(k.b,{to:"/signup"},"Sign Up"))))))},P=a(30),I=a(6),C=function(e){var t=e.id,a=Object(n.useRef)(null),c=Object(n.useState)(""),l=Object(y.a)(c,2),i=l[0],o=l[1],m=Object(n.useState)(0),d=Object(y.a)(m,2),f=d[0],E=d[1];Object(n.useEffect)((function(){(function(e){var t="users/".concat(e,"/profile-image");return p.ref().child(t).getDownloadURL()})(t).then((function(e){return!!e&&o(e)}))}),[t]);var v=function(){var e=Object(u.a)(s.a.mark((function e(a){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,a[0],h);case 2:return n=e.sent,e.next=5,n.getDownloadURL();case 5:r=e.sent,o(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=e.bytesTransferred/e.totalBytes*100;E(t)};return r.a.createElement("div",{className:"four wide column profile-image"},r.a.createElement("img",{className:"ui image",src:i||"/profile-placeholder.png",alt:"profile"}),r.a.createElement("input",{className:"file-input",type:"file",accept:".png,.jpg",ref:a,onChange:function(e){return v(e.target.files)}}),r.a.createElement("progress",{style:{width:"100%"},max:"100",value:f}),r.a.createElement("button",{className:"ui grey button upload-button",onClick:function(){return a.current.click()}},"Upload Photo"))},U=function(){var e=O().user,t=Object(g.h)(),a=Object(j.a)(),c=a.register,l=a.setValue,i=a.handleSubmit,o=Object(n.useState)(null),m=Object(y.a)(o,2),p=m[0],f=m[1],b=Object(n.useState)(!1),v=Object(y.a)(b,2),h=v[0],N=v[1];Object(n.useEffect)((function(){return d.collection("users").doc(t.id).onSnapshot((function(e){if(e.exists){var t=e.data();f(t);var a=Object.entries(t).map((function(e){return Object(I.a)({},e[0],e[1])}));l(a)}}))}),[e.uid,l,t.id]);var w=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,E(Object(P.a)({uid:t.id},a));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return e.prev=9,N(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t){return e.apply(this,arguments)}}();if(!p)return null;var x="ui big form twelve wide column ".concat(h?"loading":"");return r.a.createElement("div",{className:"add-form-container",style:{maxWidth:960,margin:"50px auto"}},r.a.createElement("div",{className:"ui grid stackable"},r.a.createElement(C,{id:t.id}),r.a.createElement("form",{className:x,onSubmit:i(w)},r.a.createElement("div",{className:"fields"},r.a.createElement("div",{className:"eight wide field"},r.a.createElement("label",null,"Name",r.a.createElement("input",{type:"text",name:"name",ref:c}))),r.a.createElement("div",{className:"eight wide field"},r.a.createElement("label",null,"Email",r.a.createElement("input",{type:"text",name:"email",disabled:!0,ref:c})))),r.a.createElement("div",{className:"fields"},r.a.createElement("div",{className:"six wide field"},r.a.createElement("label",null,"Address",r.a.createElement("input",{type:"text",name:"address",ref:c}))),r.a.createElement("div",{className:"five wide field"},r.a.createElement("label",null,"City",r.a.createElement("input",{type:"text",name:"city",ref:c}))),r.a.createElement("div",{className:"two wide field"},r.a.createElement("label",null,"State",r.a.createElement("input",{type:"text",name:"state",ref:c}))),r.a.createElement("div",{className:"three wide field"},r.a.createElement("label",null,"Zip",r.a.createElement("input",{type:"text",name:"zip",ref:c})))),r.a.createElement("div",{className:"equal width fields"},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Phone",r.a.createElement("input",{type:"text",name:"phone",ref:c}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Specialty",r.a.createElement("select",{className:"specialty",name:"specialty",ref:c},r.a.createElement("option",{value:"field agent"},"Field Agent"),r.a.createElement("option",{value:"covert operations"},"Covert Operations"),r.a.createElement("option",{value:"intelligence officer"},"Intelligence Officer")))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"ip",r.a.createElement("input",{type:"text",name:"ip",ref:c})))),r.a.createElement("button",{type:"submit",className:"ui submit large grey button right floated"},"Submit"))))},L=a(16),z=function(e){var t=e.component,a=Object(L.a)(e,["component"]),n=O(),c=n.user,l=n.isAdmin;return r.a.createElement(g.b,Object.assign({},a,{render:function(e){return c?r.a.createElement(g.a,{to:{pathname:l?"/users":"/profile/".concat(c.uid),state:{from:e.location}}}):r.a.createElement(t,e)}}))},D=function(e){var t=e.component,a=Object(L.a)(e,["component"]),n=O(),c=n.user,l=n.isAdmin;return r.a.createElement(g.b,Object.assign({},a,{render:function(e){var a=e.match.params.id;return c&&(c.uid===a||l)?r.a.createElement(t,e):r.a.createElement(g.a,{to:"/login"})}}))},R=function(e){var t=e.component,a=Object(L.a)(e,["component"]),n=O(),c=n.user,l=n.isAdmin;return r.a.createElement(g.b,Object.assign({},a,{render:function(e){return c&&l?r.a.createElement(t,e):r.a.createElement(g.a,{to:"/login"})}}))},T=function(){var e=Object(n.useState)([]),t=Object(y.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){return d.collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));c(t)}))}),[]),r.a.createElement("div",null,r.a.createElement("table",{className:"ui selectable celled table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Specialty"),r.a.createElement("th",null,"Secret Address"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"IP Address"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e.uid},r.a.createElement("td",null,r.a.createElement(k.b,{to:"/profile/".concat(e.uid)},e.name)),r.a.createElement("td",null,e.specialty),r.a.createElement("td",null,e.address," ",e.city,", ",e.state," ",e.zip),r.a.createElement("td",null,e.phone),r.a.createElement("td",null,e.ip))})))))};var B=function(){return r.a.createElement(w,null,r.a.createElement(k.a,null,r.a.createElement(x,null),r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"ui grid container"},r.a.createElement(g.d,null,r.a.createElement(z,{exact:!0,path:"/signup",component:S}),r.a.createElement(D,{exact:!0,path:"/profile/:id",component:U}),r.a.createElement(z,{exact:!0,path:"/login",component:A}),r.a.createElement(R,{exact:!0,path:"/users",component:T}),r.a.createElement(g.b,{exact:!0,path:"/"},r.a.createElement(g.a,{to:"/login"})))))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.d0f69d20.chunk.js.map